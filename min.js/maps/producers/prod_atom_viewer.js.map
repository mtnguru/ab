{"version":3,"sources":["producers/prod_atom_viewer.js"],"names":["Drupal","atomizer","producers","atom_viewerC","_viewer","viewer","createView","nuclet","nucletC","atom","atomC","view","loadAtom","nid","ghostProton","makeProton","type","x","y","z","setDefaults","userAtomFile","localStorage","getItem","selectyml","$","context","select","querySelector","value","mouseClick","event","which","preventDefault","hoverObjects","hovered","protons","atomLoaded","setItem","az"],"mappings":"AAQAA,OAAOC,SAASC,UAAUC,aAAe,SAAUC,GACjD,IAAIC,EAASD,EAyEb,OACEE,WAZe,WACfD,EAAOE,OAASP,OAAOC,SAASO,QAAQH,GACxCA,EAAOI,KAAOT,OAAOC,SAASS,MAAML,GAGpCA,EAAOM,KAAKF,KAAOJ,EAAOI,KAAKG,SAASP,EAAOJ,SAASY,IAAK,MAG7DR,EAAOM,KAAKG,YAAcT,EAAOE,OAAOQ,YAAYC,KAAM,SAAU,GAAIC,EAAG,IAAKC,EAAG,GAAIC,EAAG,KAK1FC,YA/BF,WAEE,GADAC,aAAeC,aAAaC,QAAQ,wBAChCF,cAAgC,aAAhBA,aAA6B,CAC/C,IAAIG,EAAYC,EAAE,mBAAoBpB,EAAOqB,SAAS,GAClDF,IACFG,OAASH,EAAUI,cAAc,UACjCD,OAAOE,MAAQR,gBA0BnBS,WA/Ce,SAAoBC,GACnC,OAAQA,EAAMC,OACZ,KAAK,EAGL,KAAK,EACHD,EAAME,mBA0CVC,aAtEiB,WACjB,UAsEAC,QA9DY,SAAiBC,KA+D7BC,WAxBe,SAAoB5B,GACnCa,aAAagB,QAAQ,2BAA4B7B,EAAK8B,GAAG1B","file":"../../producers/prod_atom_viewer.js","sourcesContent":["/**\n * @file - prod_atom_viewer.js\n *\n * This is a 'producer' which allows users to build atoms.\n * This module provides functions to handle deleting/adding nuclets,\n * changing a nuclets slider angle, etc.\n */\n\nDrupal.atomizer.producers.atom_viewerC = function (_viewer) {\n  var viewer = _viewer;\n\n  /**\n   * Return the objects which are active for hovering\n   *\n   * @returns {*}\n   */\n  var hoverObjects = function hoverObjects() {\n    return [];\n  };\n\n  /**\n   * User has hovered over a proton, set transparency to .5.\n   *\n   * @param event\n   */\n  var hovered = function hovered(protons) {\n    return;\n  };\n\n  /**\n   * User has clicked somewhere in the scene with the mouse.\n   *\n   * If they right clicked on a proton, find the parent nuclet and popup the nuclet edit form.\n   * If they right clicked anywhere else, pop down the nuclet edit form.\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  var mouseClick = function mouseClick(event) {\n    switch (event.which) {\n      case 1:\n        event.preventDefault();\n        break;\n      case 3:\n        event.preventDefault();\n        break;\n    }\n  };\n\n\n  /**\n   * Set Default values for any forms.\n   */\n  function setDefaults() {\n    userAtomFile = localStorage.getItem('atomizer_viewer_atom');\n    if (userAtomFile && userAtomFile != 'undefined') {\n      var selectyml = $('#atom--selectyml', viewer.context)[0];\n      if (selectyml) {\n        select = selectyml.querySelector('select');\n        select.value = userAtomFile;\n      }\n    }\n  }\n\n  var atomLoaded = function atomLoaded(atom) {\n    localStorage.setItem('atomizer_viewer_atom_nid', atom.az.nid);\n  };\n\n  /**\n   * Create the view - add any objects to scene.\n   */\n  var createView = function () {\n    viewer.nuclet = Drupal.atomizer.nucletC(viewer);\n    viewer.atom = Drupal.atomizer.atomC(viewer);\n\n    // Load and display the default atom\n    viewer.view.atom = viewer.atom.loadAtom(viewer.atomizer.nid, null);\n\n    // Create the ghost proton.  Displayed when hovering over attachment points.  Initially hidden\n    viewer.view.ghostProton = viewer.nuclet.makeProton({type: 'ghost'}, 1, {x: 300, y: 50, z: 0});\n  };\n\n  return {\n    createView: createView,\n    setDefaults: setDefaults,\n    mouseClick: mouseClick,\n    hoverObjects: hoverObjects,\n    hovered: hovered,\n    atomLoaded: atomLoaded\n  };\n};\n\n\n"]}