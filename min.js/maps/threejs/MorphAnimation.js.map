{"version":3,"sources":["threejs/MorphAnimation.js"],"names":["THREE","MorphAnimation","mesh","this","frames","morphTargetInfluences","length","currentTime","duration","loop","lastFrame","currentFrame","isPlaying","prototype","constructor","play","pause","update","delta","Math","min","frameTime","frame","floor","influences","mix"],"mappings":"AAKAA,MAAMC,eAAiB,SAAWC,GAEjCC,KAAKD,KAAOA,EACZC,KAAKC,OAASF,EAAKG,sBAAsBC,OACzCH,KAAKI,YAAc,EACnBJ,KAAKK,SAAW,IAChBL,KAAKM,MAAO,EACZN,KAAKO,UAAY,EACjBP,KAAKQ,aAAe,EAEpBR,KAAKS,WAAY,GAIlBZ,MAAMC,eAAeY,WAEpBC,YAAad,MAAMC,eAEnBc,KAAM,WAELZ,KAAKS,WAAY,GAIlBI,MAAO,WAENb,KAAKS,WAAY,GAIlBK,OAAQ,SAAWC,GAElB,IAAwB,IAAnBf,KAAKS,UAAV,CAEAT,KAAKI,aAAeW,GAED,IAAdf,KAAKM,MAAiBN,KAAKI,YAAcJ,KAAKK,WAElDL,KAAKI,aAAeJ,KAAKK,UAI1BL,KAAKI,YAAcY,KAAKC,IAAKjB,KAAKI,YAAaJ,KAAKK,UAEpD,IAAIa,EAAYlB,KAAKK,SAAWL,KAAKC,OACjCkB,EAAQH,KAAKI,MAAOpB,KAAKI,YAAcc,GAEvCG,EAAarB,KAAKD,KAAKG,sBAEtBiB,IAAUnB,KAAKQ,eAEnBa,EAAYrB,KAAKO,WAAc,EAC/Bc,EAAYrB,KAAKQ,cAAiB,EAClCa,EAAYF,GAAU,EAEtBnB,KAAKO,UAAYP,KAAKQ,aACtBR,KAAKQ,aAAeW,GAIrB,IAAIG,EAAQtB,KAAKI,YAAcc,EAAcA,EAE7CG,EAAYF,GAAUG,EACtBD,EAAYrB,KAAKO,WAAc,EAAIe","file":"../../threejs/MorphAnimation.js","sourcesContent":["/**\n * @author mrdoob / http://mrdoob.com\n * @author willy-vvu / http://willy-vvu.github.io\n */\n\nTHREE.MorphAnimation = function ( mesh ) {\n\n\tthis.mesh = mesh;\n\tthis.frames = mesh.morphTargetInfluences.length;\n\tthis.currentTime = 0;\n\tthis.duration = 1000;\n\tthis.loop = true;\n\tthis.lastFrame = 0;\n\tthis.currentFrame = 0;\n\n\tthis.isPlaying = false;\n\n};\n\nTHREE.MorphAnimation.prototype = {\n\n\tconstructor: THREE.MorphAnimation,\n\n\tplay: function () {\n\n\t\tthis.isPlaying = true;\n\n\t},\n\n\tpause: function () {\n\n\t\tthis.isPlaying = false;\n\n\t},\n\n\tupdate: function ( delta ) {\n\n\t\tif ( this.isPlaying === false ) return;\n\n\t\tthis.currentTime += delta;\n\n\t\tif ( this.loop === true && this.currentTime > this.duration ) {\n\n\t\t\tthis.currentTime %= this.duration;\n\n\t\t}\n\n\t\tthis.currentTime = Math.min( this.currentTime, this.duration );\n\n\t\tvar frameTime = this.duration / this.frames;\n\t\tvar frame = Math.floor( this.currentTime / frameTime );\n\n\t\tvar influences = this.mesh.morphTargetInfluences;\n\n\t\tif ( frame !== this.currentFrame ) {\n\n\t\t\tinfluences[ this.lastFrame ] = 0;\n\t\t\tinfluences[ this.currentFrame ] = 1;\n\t\t\tinfluences[ frame ] = 0;\n\n\t\t\tthis.lastFrame = this.currentFrame;\n\t\t\tthis.currentFrame = frame;\n\n\t\t}\n\n\t\tvar mix = ( this.currentTime % frameTime ) / frameTime;\n\n\t\tinfluences[ frame ] = mix;\n\t\tinfluences[ this.lastFrame ] = 1 - mix;\n\n\t}\n\n};\n"]}