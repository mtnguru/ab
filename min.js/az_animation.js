!function(a){"use strict";Drupal.atomizer.animationC=function(t){function e(){var a=d.theme.get("animation--speed")/1e3,t=d.camera.position.x,e=d.camera.position.y,i=d.camera.position.z;d.camera.position.x=t*Math.cos(a)+i*Math.sin(a),d.camera.position.y=e*Math.cos(a)-t*Math.sin(a),d.camera.position.z=i*Math.cos(a)-t*Math.sin(a),d.camera.lookAt(d.scene.position)}function i(){var a=p.val();c!=a?(c=a,Drupal.atomizer.base.doAjax("/ajax-ab/loadYml",{directory:d.atomizer.animateDirectory,filepath:d.atomizer.animateDirectory+"/"+c,filename:c,component:"animation"},v)):"paused"==u?(u="running",r()):m()}function n(){for(var a in l.timers)clearTimeout(f[a]);f={}}function o(){for(var a in l.timers){var t=l.timers[a];f[a]=setTimeout(function(){s(a,t)},t.time)}}function s(a,t){switch(a){case"loadatoms":z>=t.atoms.length-1?z=0:z++,n(),u="paused",d.atom.loadAtom(t.atoms[z].nid,function(){t.atoms[z].time&&(t.time=t.atoms[z].time)})}}function m(){u="running";l.timers&&(l.timers.loadatoms&&(l.timers.loadatoms.time=l.timers.loadatoms.atoms[0].time),o()),l.animations&&(u="running",r())}function r(){"running"==u&&requestAnimationFrame(r),l.animations.rotation&&"orbitals"===l.animations.rotation.name&&e(),d.render()}var c,l,d=t,u="stopped",p=a("#animation--selectyml select"),f={},z=-1,h=a("#blocks--animation--wrapper").find(".az-button"),v=function(a){c=a[0].data.filename,l=a[0].ymlContents,localStorage.setItem("atomizer_animation_file",c),p.val(c),m()};return{buttonClicked:function(t){switch(t.id){case"animation--play":i(),h.removeClass("az-selected"),a(t).addClass("az-selected");break;case"animation--pause":u="paused",n(),h.removeClass("az-selected"),a(t).addClass("az-selected");break;case"animation--stop":u="stopped",n(),h.removeClass("az-selected"),a(t).addClass("az-selected")}},loadYml:v}}}(jQuery);
//# sourceMappingURL=maps/az_animation.js.map
