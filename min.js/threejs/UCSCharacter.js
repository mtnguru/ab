THREE.UCSCharacter=function(){function t(t,e){for(var n=new THREE.TextureLoader,s=[],i=0;i<e.length;i++)s[i]=n.load(t+e[i],o.checkLoadComplete),s[i].mapping=THREE.UVMapping,s[i].name=e[i];return s}function e(t){for(var e=[],n=0;n<t.length;n++)e[n]=new THREE.MeshLambertMaterial({color:15658734,specular:10,map:t[n],skinning:!0,morphTargets:!0});return e}var n,o=this;this.scale=1,this.root=new THREE.Object3D,this.numSkins,this.numMorphs,this.skins=[],this.materials=[],this.morphs=[],this.mixer=new THREE.AnimationMixer(this.root),this.onLoadComplete=function(){},this.loadCounter=0,this.loadParts=function(s){this.numSkins=s.skins.length,this.numMorphs=s.morphs.length,this.loadCounter=1+s.skins.length,this.skins=t(s.baseUrl+"skins/",s.skins),this.materials=e(this.skins),this.morphs=s.morphs;var i=new THREE.JSONLoader;console.log(s.baseUrl+s.character),i.load(s.baseUrl+s.character,function(t){t.computeBoundingBox(),t.computeVertexNormals(),(n=new THREE.SkinnedMesh(t,new THREE.MultiMaterial)).name=s.character,o.root.add(n);var e=t.boundingBox;o.root.scale.set(s.s,s.s,s.s),o.root.position.set(s.x,s.y-e.min.y*s.s,s.z),n.castShadow=!0,n.receiveShadow=!0,o.mixer.clipAction(t.animations[0],n).play(),o.setSkin(0),o.checkLoadComplete()})},this.setSkin=function(t){n&&o.materials&&(n.material=o.materials[t])},this.updateMorphs=function(t){if(n)for(var e=0;e<o.numMorphs;e++)n.morphTargetInfluences[e]=t[o.morphs[e]]/100},this.checkLoadComplete=function(){o.loadCounter-=1,0===o.loadCounter&&o.onLoadComplete()}};
//# sourceMappingURL=../maps/threejs/UCSCharacter.js.map
